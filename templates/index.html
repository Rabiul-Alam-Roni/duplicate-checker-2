<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Protein Gelation DOI Checker</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h2>ðŸ§¬ Protein Gelation Research Articles Manager</h2>

    <input type="text" id="doi" placeholder="DOI">
    <input type="text" id="title" placeholder="Title (optional)">
    <input type="text" id="url" placeholder="URL (optional)">

    <label><input type="checkbox" id="hardness"> Gel Hardness</label>
    <label><input type="checkbox" id="whc"> WHC</label>

    <button onclick="checkDuplicate()">Check & Save</button>

    <hr>
    <h3>Batch Upload (CSV)</h3>
    <input type="file" id="fileUpload">
    <button onclick="uploadFile()">Upload CSV</button>

    <h3>Uploaded Files:</h3>
    <ul id="fileList"></ul>

    <hr>
    <a href="/export"><button>Download Backup CSV</button></a>

    <div id="response"></div>

<script src="/static/script.js"></script>
<script>
async function refreshFileList() {
    let response = await fetch('/uploaded_files');
    let files = await response.json();
    document.getElementById('fileList').innerHTML = files.map(f => 
        `<li>${f} <button onclick="deleteFile('${f}')">Delete</button></li>`
    ).join('');
}

async function deleteFile(filename) {
    await fetch('/delete_file/' + filename, {method: 'DELETE'});
    refreshFileList();
}

window.onload = refreshFileList;
</script>
</body>
</html>
